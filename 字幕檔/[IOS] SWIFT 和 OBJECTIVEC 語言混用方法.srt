1
00:00:03,670 --> 00:00:11,929
開發iPhone程式的大家

2
00:00:08,029 --> 00:00:16,189
您是用舊的Objective-C或新的Swift來開發程式呢？

3
00:00:11,929 --> 00:00:19,960
您知道Swift語言和Objective-C的檔案可以混用嗎？

4
00:00:16,190 --> 00:00:23,420
這種混用的方法叫

5
00:00:19,960 --> 00:00:27,410
混合與比對 Mix and Match

6
00:00:23,420 --> 00:00:30,680
使用混合與比對 Mix and Match

7
00:00:27,410 --> 00:00:33,890
可以在舊有的Objevtive-C專案中

8
00:00:30,680 --> 00:00:38,360
加入以Swift程式碼撰寫的新功能

9
00:00:33,890 --> 00:00:43,070
或是相反Swift專案在中使用舊OC類別

10
00:00:38,360 --> 00:00:47,660
我來帶大家實際做一遍

11
00:00:43,070 --> 00:00:50,690
首先我以不同語言

12
00:00:47,660 --> 00:00:54,199
撰寫的同一類別

13
00:00:50,690 --> 00:00:58,190
類別裡面都只有一個方法

14
00:00:54,200 --> 00:01:02,800
接受兩個參數add的方法

15
00:00:58,190 --> 00:01:07,249
如果是Swift檔案的話，類別的名稱，我命名成Calculator

16
00:01:02,800 --> 00:01:12,139
呼叫add方法的時候，會印出answer from swift file

17
00:01:07,249 --> 00:01:15,229
如果是objective-C檔案的話

18
00:01:12,139 --> 00:01:19,749
類別的名稱，我命名成OBJCCalculator

19
00:01:15,229 --> 00:01:23,299
呼叫add方法的時候

20
00:01:19,749 --> 00:01:28,788
會印出answer from objective c file

21
00:01:23,299 --> 00:01:32,359
首先來看在Swift專案中

22
00:01:28,789 --> 00:01:36,529
使用objective-c檔案

23
00:01:32,359 --> 00:01:40,609
這是一個Swift專案，名叫calculator

24
00:01:36,529 --> 00:01:44,560
我把這兩個objective-c檔案，加入Swift專案

25
00:01:40,609 --> 00:01:48,679
這個時候會跳出一個對話框

26
00:01:44,560 --> 00:01:51,429
問是否要加入objective-c

27
00:01:48,679 --> 00:01:55,639
bridging header 的檔案

28
00:01:51,429 --> 00:01:59,719
按下這個Create Bridging Header的話

29
00:01:55,639 --> 00:02:02,509
就會產出以這個專案的名字為首

30
00:01:59,719 --> 00:02:06,770
以Bridging Header .h結尾的標頭檔

31
00:02:02,509 --> 00:02:11,959
在這邊

32
00:02:06,770 --> 00:02:14,870
各位同學，

33
00:02:11,959 --> 00:02:16,819
不管是在Swift專案中使用

34
00:02:14,870 --> 00:02:21,530
使用objective-c檔案

35
00:02:16,819 --> 00:02:25,339
或者是在objective-c中，使用Swift專案

36
00:02:21,530 --> 00:02:28,849
都需要加入這個objective-c Bridging Header 的檔案

37
00:02:25,340 --> 00:02:31,879
加入objective-c Bridging Header檔案的方法有兩種

38
00:02:28,849 --> 00:02:35,060
第一種就是直接由Xcode自動生成

39
00:02:31,879 --> 00:02:38,030
像我們剛剛做的一樣，拉進objective-c的時候

40
00:02:35,060 --> 00:02:41,239
按下這個Create Bridging Header

41
00:02:38,030 --> 00:02:45,349
就生成了這個檔案

42
00:02:41,239 --> 00:02:47,840
如果剛剛沒有按下Create Bridging Header的話

43
00:02:45,349 --> 00:02:50,959
也可以手動加入

44
00:02:47,840 --> 00:02:54,590
objective-c Bridging Header

45
00:02:50,959 --> 00:02:59,019
作法就是在功能表中，

46
00:02:54,590 --> 00:03:07,159
點選上面這個File > New > File...

47
00:02:59,019 --> 00:03:11,060
然後在加入一個標頭檔

48
00:03:07,159 --> 00:03:14,989
這邊，加入一個Header File

49
00:03:11,060 --> 00:03:17,480
自己加入一個新的標頭檔也可以

50
00:03:14,989 --> 00:03:22,930
不管是怎樣加入這個檔案的

51
00:03:17,480 --> 00:03:28,159
請看這邊

52
00:03:22,930 --> 00:03:32,180
在專案的Build Settings下面

53
00:03:28,159 --> 00:03:35,810
跑到最下面，請大家看這邊

54
00:03:32,180 --> 00:03:37,609
Swift Compiler - Code Generation這一欄

55
00:03:35,810 --> 00:03:40,430
這一欄裡面，不管你是怎麼樣加入

56
00:03:37,609 --> 00:03:44,239
剛才的Bridging Header檔案的話

57
00:03:40,430 --> 00:03:47,060
在這邊，一定要確認這個objective-c Bridging Header的位置

58
00:03:44,239 --> 00:03:50,090
用第一種方法生成的objective-c Bridging Header檔案

59
00:03:47,060 --> 00:03:53,049
Xcode會自動幫我們加入

60
00:03:50,090 --> 00:03:55,280
這邊會自動寫好

61
00:03:53,049 --> 00:03:57,530
用第二種方式生成（手動生成）的話

62
00:03:55,280 --> 00:04:00,379
就要在這邊自己標示出檔案的位址

63
00:03:57,530 --> 00:04:04,069
這個檔案設定完成之後

64
00:04:00,379 --> 00:04:06,620
請打開新加入的標頭檔

65
00:04:04,069 --> 00:04:12,069
直接匯入

66
00:04:06,620 --> 00:04:15,500
所有想要匯入的

67
00:04:12,069 --> 00:04:23,139
objective-c

68
00:04:15,500 --> 00:04:26,139
標頭檔

69
00:04:23,139 --> 00:04:26,139
#impoty "OBJCCalculator"

70
00:04:28,520 --> 00:04:37,169
存檔，OK的話，要使用這個類別

71
00:04:33,240 --> 00:04:39,740
就直接使用Swift語言去呼叫使用

72
00:04:37,170 --> 00:04:45,150
比方說，在Viewcontroler.swift這邊

73
00:04:39,740 --> 00:04:49,470
ViewDidLoad這邊，生出一個OBJCCalculator()

74
00:04:45,150 --> 00:04:56,789
Swift語言去生出來

75
00:04:49,470 --> 00:05:02,490
直接呼叫add方法

76
00:04:56,790 --> 00:05:05,640
帶入2跟3

77
00:05:02,490 --> 00:05:10,020
按下Build就可以看到下面會印出

78
00:05:05,640 --> 00:05:13,320
answar from objective-c File

79
00:05:10,020 --> 00:05:17,580
這個就是在Swift專案中，使用objective-c類別的方法

80
00:05:13,320 --> 00:05:21,960
相反的，如果是一個objective-c的專案

81
00:05:17,580 --> 00:05:29,099
這邊，我要打開一個objective-c的專案

82
00:05:21,960 --> 00:05:33,989
我現在來介紹

83
00:05:29,100 --> 00:05:38,550
在objective-c專案裡面

84
00:05:33,990 --> 00:05:46,470
使用Swift專案類別的方法

85
00:05:38,550 --> 00:05:49,680
我來把Swift的檔案拉出來

86
00:05:46,470 --> 00:05:55,680
我讓Xcode自動產生objective-c Bridging Header的檔案

87
00:05:49,680 --> 00:05:58,710
如果是在objective-c這個專案裡面

88
00:05:55,680 --> 00:06:04,410
放進Swift類別的話

89
00:05:58,710 --> 00:06:07,710
這個objective-c Bridging Header的檔案裡面

90
00:06:04,410 --> 00:06:11,310
不用import任何的類別

91
00:06:07,710 --> 00:06:17,310
不用匯入任何的類別，什麼都不用作

92
00:06:11,310 --> 00:06:21,830
我們在需要使用Swift的檔案的地方，

93
00:06:17,310 --> 00:06:21,830
然後這邊

94
00:06:27,600 --> 00:06:48,850
寫入#import "OldCalculator-Swift.h"

95
00:06:38,070 --> 00:06:53,830
這樣使用的時候，在最上面

96
00:06:48,850 --> 00:06:58,120
import一個以專案名為首-Swift.h結尾的標頭檔

97
00:06:53,830 --> 00:07:01,120
這個範例裡面

98
00:06:58,120 --> 00:07:07,810
我的objective-c專案叫做old calculator

99
00:07:01,120 --> 00:07:11,140
所以，這邊

100
00:07:07,810 --> 00:07:14,620
一開始，我匯入了一個以這個專案名為首

101
00:07:11,140 --> 00:07:19,080
就是old calculator

102
00:07:14,620 --> 00:07:24,940
後面加上橫線Swift.h的標頭檔

103
00:07:19,080 --> 00:07:28,570
OldCalculator-Swift.h

104
00:07:24,940 --> 00:07:32,590
除此以外，在匯入的Swift類別裡面

105
00:07:28,570 --> 00:07:38,580
這邊要標注是NS Object的子類別

106
00:07:32,590 --> 00:07:43,960
加入NSObject就可以使用了

107
00:07:38,580 --> 00:07:47,530
使用的時候呢，回到這邊

108
00:07:43,960 --> 00:07:52,330
用objective-c，生成Swift撰寫的類別

109
00:07:47,530 --> 00:07:55,289
因為我們

110
00:07:52,330 --> 00:07:55,289
在objective-c的專案

111
00:08:01,030 --> 00:08:03,090
裡面

112
00:08:09,030 --> 00:08:18,580
在objective-c的語法

113
00:08:13,260 --> 00:08:20,969
呼叫Swift類別的方法

114
00:08:18,580 --> 00:08:20,969
按下Build

115
00:08:27,090 --> 00:08:35,140
這邊就會印出

116
00:08:30,850 --> 00:08:38,080
ansewr from Swift file: 5

117
00:08:35,140 --> 00:08:40,289
以上就是在objective-c的專案裡面

118
00:08:38,080 --> 00:08:40,290
使用Swift類別的方法
